今天写了一天的权限管理,因为一开始 并不想写的这么麻烦
只是写一个个人博客
想着也许以后还需要 整点别的东西,就先把栏目给动态化了
这栏目动态了,写权限就难受
现在的解决方法是:每次新增栏目时候,整一个以当前模块的控制器名和操作名称为key,value为0的二维数组,然后存在一个文件里面.
用户表里面存 这些控制器名和操作名
每次登陆的时候把用户的权限字段和文件里面的key做比较,isset(控制器名) && isset([控制器名][操作名]) 则 [控制器名][操作名] = 1
然后加载侧边栏目时 就比对 这个权限是否为1,不是就不展示
然后在管理模块的自定义的 Parent控制器 里面检查 当前访问的控制器名和操作名是否 == 1
这样整个权限判断就结束了

一开始只是想写个 简单的博客网站的,结果就想着 啥都加上 明天把 权限配置页面 和 用户统计 和 评论统计 写一下 后天 写 留言系统 最后写 支付系统
希望能30号去面试
Zzz
事实证明,一开始不设计好,后面随便改.越写越烂.fuck
权限到这里算是失败了
	1.为了用户体验,把很多功能集成到一个页面了,然后权限就区别困难
	2.如果 区分所有的权限, 那么与动态栏目又 冲突了
	3.最主要的还是,这个动态栏目,fuck,这就是一个脑残想法,
	4.现在的想法是先把 这个个人博客写完(后期再增加内容)
	5.之后关于权限大致的想法是:
		1.规范每个控制器的 操作名
		2.在需要权限管理的控制器 都 继承一个主控制器
		3.每个栏目设置时 都得确定用到哪些 操作
		4.每次登入有效期2小时,把用户的权限数组 存在redis里 设置2小时时限
		退出时,清掉redis的权限
		5.主控制监听初始化操作 里面写权限判定  (如果是超级管理员,则跳过)
这就差不多了.
		6.还差个显示隐藏,如果一个页面继承了很多权限,那就把 工具栏提取出来,用js来判断 (disabled)


		那么权限就到这里结束了,之后再改.现在还是先把这个项目写完.再去面试
